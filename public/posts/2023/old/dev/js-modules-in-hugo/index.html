<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JS Modules in Hugo | Hylu Blog</title>
<meta name="keywords" content="development">
<meta name="description" content="While writing this blog, I&rsquo;ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.
My most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated.">
<meta name="author" content="">
<link rel="canonical" href="https://hylog.netlify.app/posts/2023/old/dev/js-modules-in-hugo/">
<link rel="stylesheet" href="https://hylog.netlify.app/css/custom.css">
<link crossorigin="anonymous" href="/assets/css/stylesheet.09da9c313791d5ebcf2403d84146f32ee6d50a4d877cf3a7b6d0590761e49cf5.css" integrity="sha256-CdqcMTeR1evPJAPYQUbzLubVCk2HfPOnttBZB2HknPU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hylog.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hylog.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hylog.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hylog.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://hylog.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="JS Modules in Hugo" />
<meta property="og:description" content="While writing this blog, I&rsquo;ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.
My most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hylog.netlify.app/posts/2023/old/dev/js-modules-in-hugo/" />
<meta property="og:image" content="https://discoverthreejs.com/images/logo/banner_trans.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-14T07:57:33-04:00" />
<meta property="article:modified_time" content="2023-07-14T07:57:33-04:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discoverthreejs.com/images/logo/banner_trans.png" />
<meta name="twitter:title" content="JS Modules in Hugo"/>
<meta name="twitter:description" content="While writing this blog, I&rsquo;ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.
My most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hylog.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "JS Modules in Hugo",
      "item": "https://hylog.netlify.app/posts/2023/old/dev/js-modules-in-hugo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JS Modules in Hugo",
  "name": "JS Modules in Hugo",
  "description": "While writing this blog, I\u0026rsquo;ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.\nMy most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated.",
  "keywords": [
    "development"
  ],
  "articleBody": "While writing this blog, I’ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.\nMy most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated. Here, I hope to document some of my process of importing modules and hopefully make it easier for whoever is reading to import modules into their own Hugo blog.\nCore Hugo Features to Know Themes Themes are essentially, a set of prebuilt pages, partials, and shortcodes created by other developers for you to use. Each theme has its own page templates that change the way the site and any posts look as well as theme specific features like breadcrumbs and indexing.\nHugo is designed to be highly extensible and easy for you to add these features or design yourself but using a pre-built theme just saves you a lot of work. Instead, your best bet is to choose a theme and extend or override files in that theme as you need.\nthe theme will explicitly sit inside a themes folder and inside you may notice, it has a similar directory structure to your main directory\n// This is a condensed version of items you may find in your Hugo directory - assets - images - layouts themes - ThemeX - assets - images - layouts - partials - shortcodes Some of these directories will be seemingly clones of your original. This the beauty of Hugo’s themes. To edit a file in a theme, just copy the file from that theme directory into the corresponding directory in your root directory and edit the file directly. Hugo will prioritize using files in your directory rather than a theme. Any files added that are not in your theme will just be new files added on top of the theme.\nShortcodes Depending on what kind of module your importing, you may or may not need a shortcode. A shortcode is just syntatic way to cleanly inject any html into the middle of your Markdown.\nlayouts \u003e shortcodes \u003e html.html\n\u003cdiv class=\"html-block\"\u003e{{.Inner}}\u003c/div\u003e \u003cstyle\u003e .html-block { display: block; width: 100%; margin: 1rem 0; } \u003c/style\u003e I can then use this in my markdown to drop in pure html in my posts. This may not be good practice, but this is my blog and I have the freedom to do so.\n{{\u003c html \u003e}} \u003csmall style=\"color: magenta;\"\u003eHello!\u003c/small\u003e {{\u003c/ html \u003e}} Hello! You may notice the use of handle bar notation in the above code. You’re also given access to some additional syntax with Go templating for more entry points into Hugo’s features. In this case, I’m just using {{.Inner}} to grab the text placed within the shortcode and rerending it out between a .\nPartials You can think of partials as components in a framework like React. They are bits of HTML and Go templating that can be added directly into the base page template.\nLet’s say you wanted to add a custom signature at the bottom of all your pages, you can create that signature in a partial and then add that partial directly into your page templates.\nImporting a JS Module As mentioned before, we don’t want to load our module globally so instead, we will try to only load the module inside the specific post. To keep things simple and avoid cluttering your directory, we will depend on CDN’s to serve the JS that we want.\nAt first, you might try to grab the JS library in a script tag add it to your template.\n\u003cscript src=\"https:///three.js/0.154.0/three.min.js\"\u003e\u003c/script\u003e This way all js on the page has access to the library and our JS can look like this:\nimport * as THREE from 'three'; This may work but we’ll need to create our JavaScript file in every single one of our posts and call it in every one. Ideally, we would like our JS to be in one place and called from every posts that needs it. Naively, we may try placing our JS inline inside our partial or even shortcode but we’ll very quickly be met with the message import declarations may only appear at top level of a module.\nInstead, we’ll try to grab our JS globally from our /assets directory.\nCreating a Front Matter Param To start, we want to be able to optionally enable our import for each post. We can simply do this by adding a .Params check in the header of our post template for whether the shader parameter is true. If so, we’ll insert a partial which will then add our module.\n\u003c!-- Import threeCanvas module --\u003e {{ if (.Params.shader) }} {{ partial \"shader.html\" }} {{ end }} Now in our post, we can simply enable it in our front matter\n--- title: \"Hello World\" date: 2023-01-01 draft: False shader: true --- Creating our Import Partial Here we use a bit of a tricky syntax courtesy of Hugo Pipes to process files in our assets directory. Regis Philibert has a great post that goes more in-depth on the pipes feature.\n{{ $script := resources.Get \"js/script.js\" }} {{- $globalJS := $script | resources.Minify | fingerprint -}} \u003cscript type=\"module\" async src=\"{{ $globalJS.Permalink }}\" integrity=\"{{ $globalJS.Data.Integrity }}\"\u003e\u003c/script\u003e What happens here is that we grab our script at assets/js/script.js, do some extra processing like minification, and then use .Permalink to create a visible link for our script to import the module from.\nAll That’s Left is to Use It Now that we’re able to run our asset/script.js while inside our post, we can now proceed to write the JS module itself.\nimport * as THREE from 'https:.three.module.min.js'; // The rest of the script... Then, for whichever post you’d like the module to run, just set the front matter param to true and your module will be imported!\nshader: true In my case, my module loads shaders by query selecting for an HTMLElement with class .three-container. I’ve created another shortcode to generate that html.\nThe result for me is a nice shortcode that allows to me easily render shaders within a blog post such as the below.\n",
  "wordCount" : "1052",
  "inLanguage": "en",
  "image":"https://discoverthreejs.com/images/logo/banner_trans.png","datePublished": "2023-07-14T07:57:33-04:00",
  "dateModified": "2023-07-14T07:57:33-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hylog.netlify.app/posts/2023/old/dev/js-modules-in-hugo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hylu Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hylog.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hylog.netlify.app/" accesskey="h" title="Hylu Blog (Alt + H)">Hylu Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hylog.netlify.app/posts/" title="Posts">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://hylog.netlify.app/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hylog.netlify.app/">Home</a>&nbsp;»&nbsp;<a href="https://hylog.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title">
      JS Modules in Hugo
    </h1>
    <div class="post-meta"><span title='2023-07-14 07:57:33 -0400 EDT'>July 14, 2023</span>

</div>
    
    
    
    
  </header> 
<figure class="entry-cover"><a href="https://discoverthreejs.com/images/logo/banner_trans.png" target="_blank"
            rel="noopener noreferrer"><img loading="lazy" src="https://discoverthreejs.com/images/logo/banner_trans.png" alt=""></a>
        
</figure>
<style>
    .entry-cover img {
        height: 200px !important;
        object-fit: cover !important;
    }
</style>
<div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#core-hugo-features-to-know" aria-label="Core Hugo Features to Know">Core Hugo Features to Know</a><ul>
                        
                <li>
                    <a href="#themes" aria-label="Themes">Themes</a></li>
                <li>
                    <a href="#shortcodes" aria-label="Shortcodes">Shortcodes</a></li>
                <li>
                    <a href="#partials" aria-label="Partials">Partials</a></li></ul>
                </li>
                <li>
                    <a href="#importing-a-js-module" aria-label="Importing a JS Module">Importing a JS Module</a><ul>
                        
                <li>
                    <a href="#creating-a-front-matter-param" aria-label="Creating a Front Matter Param">Creating a Front Matter Param</a></li>
                <li>
                    <a href="#creating-our-import-partial" aria-label="Creating our Import Partial">Creating our Import Partial</a></li>
                <li>
                    <a href="#all-thats-left-is-to-use-it" aria-label="All That&rsquo;s Left is to Use It">All That&rsquo;s Left is to Use It</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>While writing this blog, I&rsquo;ve been constantly finding a need to include various JavaScript libraries such as graphics libraries or text processors. I love the simplicity of Markdown but sometimes it can be really helpful to include more meaningful content and visuals to better illustrate a certain topic or idea.</p>
<p>My most recent endeavor was adding an easy way to render shaders within each of posts which turned out to be a more painful task than I originally anticipated. Here, I hope to document some of my process of importing modules and hopefully make it easier for whoever is reading to import modules into their own Hugo blog.</p>
<h2 id="core-hugo-features-to-know">Core Hugo Features to Know<a hidden class="anchor" aria-hidden="true" href="#core-hugo-features-to-know">#</a></h2>
<h3 id="themes">Themes<a hidden class="anchor" aria-hidden="true" href="#themes">#</a></h3>
<p>Themes are essentially, a set of prebuilt pages, partials, and shortcodes created by other developers for you to use. Each theme has its own page templates that change the way the site and any posts look as well as theme specific features like breadcrumbs and indexing.</p>
<p>Hugo is designed to be highly extensible and easy for you to add these features or design yourself but using a pre-built theme just saves you a lot of work. Instead, your best bet is to choose a theme and extend or override files in that theme as you need.</p>
<p>the theme will explicitly sit inside a <code>themes</code> folder and inside you may notice, it has a similar directory structure to your main directory</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// This is a condensed version of items you may find in your Hugo directory
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">-</span> assets
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span> images
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span> layouts
</span></span><span style="display:flex;"><span>themes
</span></span><span style="display:flex;"><span> <span style="color:#f92672">-</span> ThemeX
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span> assets
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span> images
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span> layouts
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">-</span> partials
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">-</span> shortcodes
</span></span></code></pre></div><p>Some of these directories will be seemingly clones of your original. This the beauty of Hugo&rsquo;s themes. To edit a file in a theme, just copy the file from that theme directory into the corresponding directory in your root directory and edit the file directly. Hugo will prioritize using files in your directory rather than a theme. Any files added that are not in your theme will just be new files added on top of the theme.</p>
<h3 id="shortcodes">Shortcodes<a hidden class="anchor" aria-hidden="true" href="#shortcodes">#</a></h3>
<p>Depending on what kind of module your importing, you may or may not need a shortcode. A shortcode is just syntatic way to cleanly inject any html into the middle of your Markdown.</p>
<blockquote>
<p>layouts &gt; shortcodes &gt; html.html</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;html-block&#34;</span>&gt;{{.Inner}}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">html-block</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span></code></pre></div><p>I can then use this in my markdown to drop in pure html in my posts. This may not be good practice, but this is my blog and I have the freedom to do so.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>{{&lt; <span style="color:#f92672">html</span> &gt;}}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">small</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;color: magenta;&#34;</span>&gt;Hello!&lt;/<span style="color:#f92672">small</span>&gt; 
</span></span><span style="display:flex;"><span>{{&lt;/ <span style="color:#f92672">html</span> &gt;}}
</span></span></code></pre></div><div class="html-block">
    <small style="color: magenta;">Hello!</small> 
</div>

<style>
    .html-block {
        display: block;
        width: 100%;
        margin: 1rem 0;
    }
</style>
<p>You may notice the use of handle bar notation in the above code. You&rsquo;re also given access to some additional syntax with Go templating for more entry points into Hugo&rsquo;s features. In this case, I&rsquo;m just using <code>{{.Inner}}</code> to grab the text placed within the shortcode and rerending it out between a <code>&lt;div&gt;&lt;/div&gt;</code>.</p>
<h3 id="partials">Partials<a hidden class="anchor" aria-hidden="true" href="#partials">#</a></h3>
<p>You can think of partials as components in a framework like React. They are bits of HTML and Go templating that can be added directly into the base page template.</p>
<p>Let&rsquo;s say you wanted to add a custom signature at the bottom of all your pages, you can create that signature in a partial and then add that partial directly into your page templates.</p>
<h2 id="importing-a-js-module">Importing a JS Module<a hidden class="anchor" aria-hidden="true" href="#importing-a-js-module">#</a></h2>
<p>As mentioned before, we don&rsquo;t want to load our module globally so instead, we will try to only load the module inside the specific post. To keep things simple and avoid cluttering your directory, we will depend on CDN&rsquo;s to serve the JS that we want.</p>
<p>At first, you might try to grab the JS library in a script tag add it to your template.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://&lt;host&gt;/three.js/0.154.0/three.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><p>This way all js on the page has access to the library and our JS can look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">THREE</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;three&#39;</span>;
</span></span></code></pre></div><p>This may work but we&rsquo;ll need to create our JavaScript file in every single one of our posts and call it in every one. Ideally, we would like our JS to be in one place and called from every posts that needs it. Naively, we may try placing our JS inline inside our partial or even shortcode but we&rsquo;ll very quickly be met with the message <code>import declarations may only appear at top level of a module</code>.</p>
<p>Instead, we&rsquo;ll try to grab our JS globally from our <code>/assets</code> directory.</p>
<h3 id="creating-a-front-matter-param">Creating a Front Matter Param<a hidden class="anchor" aria-hidden="true" href="#creating-a-front-matter-param">#</a></h3>
<p>To start, we want to be able to optionally enable our import for each post. We can simply do this by adding a <code>.Params</code> check in the header of our post template for whether the <code>shader</code> parameter is true. If so, we&rsquo;ll insert a partial which will then add our module.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>&lt;!<span style="color:#f92672">--</span> <span style="color:#a6e22e">Import</span> <span style="color:#a6e22e">threeCanvas</span> <span style="color:#a6e22e">module</span> <span style="color:#f92672">--</span>&gt;
</span></span><span style="display:flex;"><span>{{ <span style="color:#66d9ef">if</span> (.<span style="color:#a6e22e">Params</span>.<span style="color:#a6e22e">shader</span>) }}
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">partial</span> <span style="color:#e6db74">&#34;shader.html&#34;</span> }}
</span></span><span style="display:flex;"><span>{{ <span style="color:#a6e22e">end</span> }}
</span></span></code></pre></div><p>Now in our post, we can simply enable it in our <strong>front matter</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;Hello World&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">date</span>: <span style="color:#e6db74">2023-01-01</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">draft</span>: <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">shader</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><h3 id="creating-our-import-partial">Creating our Import Partial<a hidden class="anchor" aria-hidden="true" href="#creating-our-import-partial">#</a></h3>
<p>Here we use a bit of a tricky syntax courtesy of <a href="https://gohugo.io/hugo-pipes/introduction/">Hugo Pipes</a> to process files in our assets directory. Regis Philibert has a great <a href="https://www.regisphilibert.com/blog/2018/07/hugo-pipes-and-asset-processing-pipeline/">post</a> that goes more in-depth on the pipes feature.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{ <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">script</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">Get</span> <span style="color:#e6db74">&#34;js/script.js&#34;</span> }}
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">globalJS</span> <span style="color:#f92672">:=</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">script</span> | <span style="color:#a6e22e">resources</span>.<span style="color:#a6e22e">Minify</span> | <span style="color:#a6e22e">fingerprint</span> <span style="color:#f92672">-</span>}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#a6e22e">script</span> <span style="color:#66d9ef">type</span>=<span style="color:#e6db74">&#34;module&#34;</span> <span style="color:#a6e22e">async</span> <span style="color:#a6e22e">src</span>=<span style="color:#e6db74">&#34;{{ $globalJS.Permalink }}&#34;</span> <span style="color:#a6e22e">integrity</span>=<span style="color:#e6db74">&#34;{{ $globalJS.Data.Integrity }}&#34;</span>&gt;&lt;<span style="color:#f92672">/</span><span style="color:#a6e22e">script</span>&gt;
</span></span></code></pre></div><p>What happens here is that we grab our script at <code>assets/js/script.js</code>, do some extra processing like minification, and then use <code>.Permalink</code> to create a visible link for our script to import the module from.</p>
<h3 id="all-thats-left-is-to-use-it">All That&rsquo;s Left is to Use It<a hidden class="anchor" aria-hidden="true" href="#all-thats-left-is-to-use-it">#</a></h3>
<p>Now that we&rsquo;re able to run our <code>asset/script.js</code> while inside our post, we can now proceed to write the JS module itself.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">THREE</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;https:&lt;host&gt;.three.module.min.js&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// The rest of the script...
</span></span></span></code></pre></div><p>Then, for whichever post you&rsquo;d like the module to run, just set the front matter param to true and your module will be imported!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">shader</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>In my case, my module loads shaders by query selecting for an <code>HTMLElement</code> with class <code>.three-container</code>. I&rsquo;ve created another shortcode to generate that html.</p>
<p>The result for me is a nice shortcode that allows to me easily render shaders within a blog post such as the below.</p>
<div class="flex-tiles">
    


<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>
    


<div class="three-wrapper">

    <div class="three-2d-container" style="height:300px;width:300px;">
        
<script class="fragment-file" type="x-shader/x-fragment">
shaders/swirl.frag
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>





<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>
    


<div class="three-wrapper">

    <div class="three-2d-container" style="height:300px;width:300px;">
        
<script class="fragment-file" type="x-shader/x-fragment">
shaders/grid-squares.frag
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>



</div>

<style>
    .flex-tiles {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: center;
        gap: 2%;
    }

    .flex-tiles > * {
        width: 49%;
    }
</style>




    
    
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hylog.netlify.app/tags/development/">development</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hylog.netlify.app/posts/2023/old/dev/some-more-glsl/">
    <span class="title">« Prev</span>
    <br>
    <span>Some More GLSL</span>
  </a>
  <a class="next" href="https://hylog.netlify.app/posts/2023/old/dev/basics-of-shader-fractals/">
    <span class="title">Next »</span>
    <br>
    <span>Basics of Shader Fractals</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://hylog.netlify.app/">Hylu Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
