<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Basics of Shader Fractals | Hylu Blog</title>
<meta name="keywords" content="shaders, glsl">
<meta name="description" content="Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.
How to Make a Fractal I&rsquo;ll be following kishimisu&rsquo;s guide on shaders.
Create a Shape First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle.">
<meta name="author" content="">
<link rel="canonical" href="https://hylog.netlify.app/posts/2023/old/dev/basics-of-shader-fractals/">
<link rel="stylesheet" href="https://hylog.netlify.app/css/custom.css">
<link crossorigin="anonymous" href="/assets/css/stylesheet.09da9c313791d5ebcf2403d84146f32ee6d50a4d877cf3a7b6d0590761e49cf5.css" integrity="sha256-CdqcMTeR1evPJAPYQUbzLubVCk2HfPOnttBZB2HknPU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hylog.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hylog.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hylog.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hylog.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://hylog.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Basics of Shader Fractals" />
<meta property="og:description" content="Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.
How to Make a Fractal I&rsquo;ll be following kishimisu&rsquo;s guide on shaders.
Create a Shape First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hylog.netlify.app/posts/2023/old/dev/basics-of-shader-fractals/" />
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/a/af/Simple_Fractals.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-13T20:53:06-04:00" />
<meta property="article:modified_time" content="2023-07-13T20:53:06-04:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/a/af/Simple_Fractals.png" />
<meta name="twitter:title" content="Basics of Shader Fractals"/>
<meta name="twitter:description" content="Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.
How to Make a Fractal I&rsquo;ll be following kishimisu&rsquo;s guide on shaders.
Create a Shape First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hylog.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Basics of Shader Fractals",
      "item": "https://hylog.netlify.app/posts/2023/old/dev/basics-of-shader-fractals/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Basics of Shader Fractals",
  "name": "Basics of Shader Fractals",
  "description": "Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.\nHow to Make a Fractal I\u0026rsquo;ll be following kishimisu\u0026rsquo;s guide on shaders.\nCreate a Shape First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle.",
  "keywords": [
    "shaders", "glsl"
  ],
  "articleBody": "Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.\nHow to Make a Fractal I’ll be following kishimisu’s guide on shaders.\nCreate a Shape First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle.\nuniform float u_time; uniform vec2 u_resolution; void main() { // center uv coordinate and normalize aspect ratio vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y; vec3 color; float dist = length(uv); color = vec3(dist) - .5; color = abs(color); color = .1/color; color = pow(color, vec3(2.)); gl_FragColor = vec4(color, 1.); Add fract() We can then form out a pattern by setting the uv coordinates to its fractional component.\nuv = fract(uv)*2.-1.; Throw It in a Loop Here is where the fractal comes in. We can keep repeating this pattern for larger and larger uv coordinates by constantly iterating over our circle code. Additionally, we add our circle color to a finalColor variable so we get the result of every iteration on our canvas.\nvec3 finalColor; for (float i = 0.; i \u003c 3.; i++) { uv = fract(uv)*2.-1.; float dist = length(uv); color = .1/abs(vec3(dist) - .5); color = pow(color, vec3(2.)); finalColor += color; } gl_FragColor = vec4(finalColor, 1.); Add Some Complexity and Time While we have a fractal, the pattern is rather simple. We can up the interest just by nudging a few values and adding a few terms.\nIt can be helpful to declare some terms outside the loop to keep the pattern from being too repetitive. In this case, I’ve added global_dist for the radial distance of a pixel from the center.\nWe can also start animating by wrapping some terms in a sin() and adding a constant u_time to the phase shift for a smooth cycle between values.\nfloat global_dist = length(uv); // declared outside of loop uv = fract(uv*1.5)*2.-1.; float dist = length(uv)*global_dist; color = abs(.6*sin(color + global_dist + dist*2. + u_time)); Final shader\nuniform float u_time; uniform vec2 u_resolution; void main() { vec3 finalColor; vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y; float global_dist = length(uv); vec3 color; for (float i = 0.; i \u003c 3.; i++) { uv = fract(uv*1.5)*2.-1.; float dist = length(uv)*global_dist; color = .1/abs(vec3(dist) - .5); color = abs(.6*sin(color + global_dist + dist*2. + u_time)); color = pow(color, vec3(2.)); finalColor += color; } gl_FragColor = vec4(finalColor, 1.); } Start Experimenting With this basis, you can continue to add to the fractal by encorporating gradients, adjusting iterations, adding curves, and anything at all really. The tiniest change can generate a wildy different fractal pattern and it’s all about experimentation to get something you might like.\nuniform float u_time; uniform vec2 u_resolution; #define PI 3.1415926538 #define TAU 6.2831855 // https://iquilezles.org/articles/palettes/ vec3 palette( in float t ) { vec3 a = vec3(.5); vec3 b = vec3(.5); vec3 c = vec3(1.); vec3 d = vec3(abs(.2*sin(u_time*.1)), abs(sin(u_time*.1)), 0.5); return a + b*cos( 6.28318*(c*t+d) ); } void main() { vec3 color; vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y; float dist; float global_dist = length(uv); vec3 final_color; for (float i = 0.; i \u003c 3.; i++) { uv = fract(uv*1.5) - .5; dist = length(uv)*exp(-global_dist); color = palette(global_dist+u_time*.5); dist = .1*sin(dist*8. + u_time*2.); dist = abs(dist); dist = .01/dist; dist = pow(dist, 1.2); final_color += color*dist; } gl_FragColor = vec4(final_color, 1.); } ",
  "wordCount" : "579",
  "inLanguage": "en",
  "image":"https://upload.wikimedia.org/wikipedia/commons/a/af/Simple_Fractals.png","datePublished": "2023-07-13T20:53:06-04:00",
  "dateModified": "2023-07-13T20:53:06-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hylog.netlify.app/posts/2023/old/dev/basics-of-shader-fractals/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hylu Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hylog.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hylog.netlify.app/" accesskey="h" title="Hylu Blog (Alt + H)">Hylu Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hylog.netlify.app/posts/" title="Posts">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://hylog.netlify.app/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hylog.netlify.app/">Home</a>&nbsp;»&nbsp;<a href="https://hylog.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title">
      Basics of Shader Fractals
    </h1>
    <div class="post-meta"><span title='2023-07-13 20:53:06 -0400 EDT'>July 13, 2023</span>

</div>
    
    
    
    
    
<script
  type="application/javascript"
  id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  async
></script>
<script 
  type="text/x-mathjax-config"
  async
  >
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
           extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
    
  </header> 
<figure class="entry-cover"><a href="https://upload.wikimedia.org/wikipedia/commons/a/af/Simple_Fractals.png" target="_blank"
            rel="noopener noreferrer"><img loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/a/af/Simple_Fractals.png" alt=""></a>
        
</figure>
<style>
    .entry-cover img {
        height: 200px !important;
        object-fit: cover !important;
    }
</style>
<div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#how-to-make-a-fractal" aria-label="How to Make a Fractal">How to Make a Fractal</a><ul>
                        
                <li>
                    <a href="#create-a-shape" aria-label="Create a Shape">Create a Shape</a></li>
                <li>
                    <a href="#add-fract" aria-label="Add fract()">Add fract()</a></li>
                <li>
                    <a href="#throw-it-in-a-loop" aria-label="Throw It in a Loop">Throw It in a Loop</a></li>
                <li>
                    <a href="#add-some-complexity-and-time" aria-label="Add Some Complexity and Time">Add Some Complexity and Time</a></li></ul>
                </li>
                <li>
                    <a href="#start-experimenting" aria-label="Start Experimenting">Start Experimenting</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Fractals are built off of a single pattern or formula, repeated constantly with smaller and smaller transformations. In glsl, this idea translates nicely into iterative coding with for loops.</p>
<h2 id="how-to-make-a-fractal">How to Make a Fractal<a hidden class="anchor" aria-hidden="true" href="#how-to-make-a-fractal">#</a></h2>
<p>I&rsquo;ll be following <a href="https://www.youtube.com/watch?v=f4s1h2YETNY">kishimisu&rsquo;s guide</a> on shaders.</p>
<h3 id="create-a-shape">Create a Shape<a hidden class="anchor" aria-hidden="true" href="#create-a-shape">#</a></h3>
<p>First off, we can start by creating some base patterns that we want to design our fractal off of. In this case, we can start with a simple circle.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>uniform <span style="color:#66d9ef">float</span> u_time;
</span></span><span style="display:flex;"><span>uniform vec2 u_resolution;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// center uv coordinate and normalize aspect ratio
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    vec2 uv <span style="color:#f92672">=</span> (gl_FragCoord.xy<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span> <span style="color:#f92672">-</span> u_resolution.xy) <span style="color:#f92672">/</span> u_resolution.y;
</span></span><span style="display:flex;"><span>    vec3 color;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec3</span>(dist) <span style="color:#f92672">-</span> <span style="color:#ae81ff">.5</span>;
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#a6e22e">abs</span>(color);
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span><span style="color:#f92672">/</span>color;
</span></span><span style="display:flex;"><span>    color <span style="color:#f92672">=</span> <span style="color:#a6e22e">pow</span>(color, <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">2.</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    gl_FragColor <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec4</span>(color, <span style="color:#ae81ff">1.</span>);
</span></span></code></pre></div>

<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>
    


<div class="three-wrapper">

    <div class="three-2d-container" style="height:300px;width:300px;">
        
<script class="fragment-shader" type="x-shader/x-fragment">
uniform float u_time;
uniform vec2 u_resolution;
void main() {
    vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y;
    vec3 color;

    float dist = length(uv);

    color = vec3(dist) - .5;
    color = abs(color);
    color = .1/color;
    color = pow(color, vec3(2.));

    gl_FragColor = vec4(color, 1.);
}
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>


<h3 id="add-fract">Add fract()<a hidden class="anchor" aria-hidden="true" href="#add-fract">#</a></h3>
<p>We can then form out a pattern by setting the uv coordinates to its fractional component.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>uv <span style="color:#f92672">=</span> <span style="color:#a6e22e">fract</span>(uv)<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>;
</span></span></code></pre></div>

<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>
    


<div class="three-wrapper">

    <div class="three-2d-container" style="height:300px;width:300px;">
        
<script class="fragment-shader" type="x-shader/x-fragment">
uniform float u_time;
uniform vec2 u_resolution;
void main() {
    vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y;
    vec3 color;
    uv = fract(uv)*2.-1.;

    float dist = length(uv);

    color = vec3(dist) - .5;
    color = abs(color);
    color = .1/color;
    color = pow(color, vec3(2.));

    gl_FragColor = vec4(color, 1.);
}
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>


<h3 id="throw-it-in-a-loop">Throw It in a Loop<a hidden class="anchor" aria-hidden="true" href="#throw-it-in-a-loop">#</a></h3>
<p>Here is where the fractal comes in. We can keep repeating this pattern for larger and larger uv coordinates by constantly iterating over our circle code. Additionally, we add our circle <code>color</code> to a <code>finalColor</code> variable so we get the result of every iteration on our canvas.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    vec3 finalColor;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">float</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3.</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        uv <span style="color:#f92672">=</span> <span style="color:#a6e22e">fract</span>(uv)<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv);
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span><span style="color:#f92672">/</span><span style="color:#a6e22e">abs</span>(<span style="color:#a6e22e">vec3</span>(dist) <span style="color:#f92672">-</span> <span style="color:#ae81ff">.5</span>);
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#a6e22e">pow</span>(color, <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">2.</span>));
</span></span><span style="display:flex;"><span>        finalColor <span style="color:#f92672">+=</span> color;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    gl_FragColor <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec4</span>(finalColor, <span style="color:#ae81ff">1.</span>);
</span></span></code></pre></div>

<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>
    


<div class="three-wrapper">

    <div class="three-2d-container" style="height:300px;width:300px;">
        
<script class="fragment-shader" type="x-shader/x-fragment">
uniform float u_time;
uniform vec2 u_resolution;
void main() {
    vec3 finalColor;
    vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y;
    vec3 color;
    for (float i = 0.; i < 3.; i++) {
        uv = fract(uv)*2.-1.;
        float dist = length(uv);
        color = .1/abs(vec3(dist) - .5);
        color = pow(color, vec3(2.));
        finalColor += color;
    }

    gl_FragColor = vec4(finalColor, 1.);
}
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>


<h3 id="add-some-complexity-and-time">Add Some Complexity and Time<a hidden class="anchor" aria-hidden="true" href="#add-some-complexity-and-time">#</a></h3>
<p>While we have a fractal, the pattern is rather simple. We can up the interest just by <strong>nudging a few values and adding a few terms</strong>.</p>
<p>It can be helpful to declare some terms outside the loop to keep the pattern from being too repetitive. In this case, I&rsquo;ve added <code>global_dist</code> for the radial distance of a pixel from the center.</p>
<p>We can also start animating by wrapping some terms in a <code>sin()</code> and adding a constant <code>u_time</code> to the phase shift for a smooth cycle between values.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> global_dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv); <span style="color:#75715e">// declared outside of loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>uv <span style="color:#f92672">=</span> <span style="color:#a6e22e">fract</span>(uv<span style="color:#f92672">*</span><span style="color:#ae81ff">1.5</span>)<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv)<span style="color:#f92672">*</span>global_dist;
</span></span><span style="display:flex;"><span>color <span style="color:#f92672">=</span> <span style="color:#a6e22e">abs</span>(<span style="color:#ae81ff">.6</span><span style="color:#f92672">*</span><span style="color:#a6e22e">sin</span>(color <span style="color:#f92672">+</span> global_dist <span style="color:#f92672">+</span> dist<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span> <span style="color:#f92672">+</span> u_time));
</span></span></code></pre></div>

<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>

<div class="three-wrapper">

    <div class="three-2d-container" style="height:600px;width:600px;">
        
<script class="fragment-shader" type="x-shader/x-fragment">
uniform float u_time;
uniform vec2 u_resolution;
void main() {
    vec3 finalColor;
    vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y;
    float global_dist = length(uv);
    vec3 color;
    for (float i = 0.; i < 3.; i++) {
        uv = fract(uv*1.5)*2.-1.;
        float dist = length(uv)*global_dist;
        color = .1/abs(vec3(dist) - .5);
        color = abs(.6*sin(color + global_dist + dist*2. + u_time));
        color = pow(color, vec3(2.));
        finalColor += color;
    }

    gl_FragColor = vec4(finalColor, 1.);
}
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>


<blockquote>
<p>Final shader</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>uniform <span style="color:#66d9ef">float</span> u_time;
</span></span><span style="display:flex;"><span>uniform vec2 u_resolution;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    vec3 finalColor;
</span></span><span style="display:flex;"><span>    vec2 uv <span style="color:#f92672">=</span> (gl_FragCoord.xy<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span> <span style="color:#f92672">-</span> u_resolution.xy) <span style="color:#f92672">/</span> u_resolution.y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> global_dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv);
</span></span><span style="display:flex;"><span>    vec3 color;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">float</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3.</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        uv <span style="color:#f92672">=</span> <span style="color:#a6e22e">fract</span>(uv<span style="color:#f92672">*</span><span style="color:#ae81ff">1.5</span>)<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv)<span style="color:#f92672">*</span>global_dist;
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span><span style="color:#f92672">/</span><span style="color:#a6e22e">abs</span>(<span style="color:#a6e22e">vec3</span>(dist) <span style="color:#f92672">-</span> <span style="color:#ae81ff">.5</span>);
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#a6e22e">abs</span>(<span style="color:#ae81ff">.6</span><span style="color:#f92672">*</span><span style="color:#a6e22e">sin</span>(color <span style="color:#f92672">+</span> global_dist <span style="color:#f92672">+</span> dist<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span> <span style="color:#f92672">+</span> u_time));
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#a6e22e">pow</span>(color, <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">2.</span>));
</span></span><span style="display:flex;"><span>        finalColor <span style="color:#f92672">+=</span> color;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    gl_FragColor <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec4</span>(finalColor, <span style="color:#ae81ff">1.</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="start-experimenting">Start Experimenting<a hidden class="anchor" aria-hidden="true" href="#start-experimenting">#</a></h2>
<p>With this basis, you can continue to add to the fractal by <strong>encorporating gradients, adjusting iterations, adding curves</strong>, and <strong>anything</strong> at all really. The tiniest change can generate a wildy different fractal pattern and it&rsquo;s all about experimentation to get something you might like.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>uniform <span style="color:#66d9ef">float</span> u_time;
</span></span><span style="display:flex;"><span>uniform vec2 u_resolution;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define PI 3.1415926538
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define TAU 6.2831855
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// https://iquilezles.org/articles/palettes/
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>vec3 <span style="color:#a6e22e">palette</span>( in <span style="color:#66d9ef">float</span> t )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vec3 a <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">.5</span>);
</span></span><span style="display:flex;"><span>    vec3 b <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">.5</span>);
</span></span><span style="display:flex;"><span>    vec3 c <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec3</span>(<span style="color:#ae81ff">1.</span>);
</span></span><span style="display:flex;"><span>    vec3 d <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec3</span>(<span style="color:#a6e22e">abs</span>(<span style="color:#ae81ff">.2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">sin</span>(u_time<span style="color:#f92672">*</span><span style="color:#ae81ff">.1</span>)), <span style="color:#a6e22e">abs</span>(<span style="color:#a6e22e">sin</span>(u_time<span style="color:#f92672">*</span><span style="color:#ae81ff">.1</span>)), <span style="color:#ae81ff">0.5</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a <span style="color:#f92672">+</span> b<span style="color:#f92672">*</span><span style="color:#a6e22e">cos</span>( <span style="color:#ae81ff">6.28318</span><span style="color:#f92672">*</span>(c<span style="color:#f92672">*</span>t<span style="color:#f92672">+</span>d) );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    vec3 color;
</span></span><span style="display:flex;"><span>    vec2 uv <span style="color:#f92672">=</span> (gl_FragCoord.xy<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span> <span style="color:#f92672">-</span> u_resolution.xy) <span style="color:#f92672">/</span> u_resolution.y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> dist;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> global_dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv);
</span></span><span style="display:flex;"><span>    vec3 final_color;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">float</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3.</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        uv <span style="color:#f92672">=</span> <span style="color:#a6e22e">fract</span>(uv<span style="color:#f92672">*</span><span style="color:#ae81ff">1.5</span>) <span style="color:#f92672">-</span> <span style="color:#ae81ff">.5</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(uv)<span style="color:#f92672">*</span><span style="color:#a6e22e">exp</span>(<span style="color:#f92672">-</span>global_dist);
</span></span><span style="display:flex;"><span>        color <span style="color:#f92672">=</span> <span style="color:#a6e22e">palette</span>(global_dist<span style="color:#f92672">+</span>u_time<span style="color:#f92672">*</span><span style="color:#ae81ff">.5</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        dist <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span><span style="color:#f92672">*</span><span style="color:#a6e22e">sin</span>(dist<span style="color:#f92672">*</span><span style="color:#ae81ff">8.</span> <span style="color:#f92672">+</span> u_time<span style="color:#f92672">*</span><span style="color:#ae81ff">2.</span>);
</span></span><span style="display:flex;"><span>        dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">abs</span>(dist);
</span></span><span style="display:flex;"><span>        dist <span style="color:#f92672">=</span> <span style="color:#ae81ff">.01</span><span style="color:#f92672">/</span>dist;
</span></span><span style="display:flex;"><span>        dist <span style="color:#f92672">=</span> <span style="color:#a6e22e">pow</span>(dist, <span style="color:#ae81ff">1.2</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        final_color <span style="color:#f92672">+=</span> color<span style="color:#f92672">*</span>dist;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    gl_FragColor <span style="color:#f92672">=</span> <span style="color:#a6e22e">vec4</span>(final_color, <span style="color:#ae81ff">1.</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

<script type="module" async src="https://hylog.netlify.app/js/bundle.min.ed14cdeec2cdfd6738b20d935e3844ef55b6f520e4966b679ea08398462d7497.js" integrity="sha256-7RTN7sLN/Wc4sg2TXjhE71W29SDklmtnnqCDmEYtdJc="></script>

<div class="three-wrapper">

    <div class="three-2d-container" style="height:600px;width:600px;">
        
<script class="fragment-shader" type="x-shader/x-fragment">
uniform float u_time;
uniform vec2 u_resolution;

#define PI 3.1415926538
#define TAU 6.2831855

// https://iquilezles.org/articles/palettes/
vec3 palette( in float t )
{
    vec3 a = vec3(.5);
    vec3 b = vec3(.5);
    vec3 c = vec3(1.);
    vec3 d = vec3(abs(.2*sin(u_time*.1)), abs(sin(u_time*.1)), 0.5);
    return a + b*cos( 6.28318*(c*t+d) );
}

void main() {
    vec3 color;
    vec2 uv = (gl_FragCoord.xy*2. - u_resolution.xy) / u_resolution.y;
    float dist;
    float global_dist = length(uv);
    vec3 final_color;

    for (float i = 0.; i < 3.; i++) {
        uv = fract(uv*1.5) - .5;
        dist = length(uv)*exp(-global_dist);
        color = palette(global_dist+u_time*.5);
        dist = .1*sin(dist*8. + u_time*2.);
        dist = abs(dist);
        dist = .01/dist;
        dist = pow(dist, 1.2);
        final_color += color*dist;
    }
    gl_FragColor = vec4(final_color, 1.);
}
</script>

    </div>

</div>

<style>
    .three-wrapper {
        display: flex;
        justify-content: center;
        padding: 1rem;
    }
</style>




    
    
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hylog.netlify.app/tags/shaders/">shaders</a></li>
      <li><a href="https://hylog.netlify.app/tags/glsl/">glsl</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hylog.netlify.app/posts/2023/old/dev/js-modules-in-hugo/">
    <span class="title">« Prev</span>
    <br>
    <span>JS Modules in Hugo</span>
  </a>
  <a class="next" href="https://hylog.netlify.app/posts/2023/old/other/some-casual-art/">
    <span class="title">Next »</span>
    <br>
    <span>Some Casual Art</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://hylog.netlify.app/">Hylu Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
