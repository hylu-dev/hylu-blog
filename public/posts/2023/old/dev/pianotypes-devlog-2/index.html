<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Pianotypes Devlog 2 | Hylu Blog</title>
<meta name="keywords" content="development, pianotypes">
<meta name="description" content="I&rsquo;m a bit more than late for a second devlog but I figured there&rsquo;s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I&rsquo;m hoping with this log to bring that focus back down to just that.
Since my previous post, I&rsquo;ve done a lot of fine tuning of the UI and functionality of the site.">
<meta name="author" content="">
<link rel="canonical" href="https://hylog.netlify.app/posts/2023/old/dev/pianotypes-devlog-2/">
<link rel="stylesheet" href="https://hylog.netlify.app/css/custom.css">
<link crossorigin="anonymous" href="/assets/css/stylesheet.09da9c313791d5ebcf2403d84146f32ee6d50a4d877cf3a7b6d0590761e49cf5.css" integrity="sha256-CdqcMTeR1evPJAPYQUbzLubVCk2HfPOnttBZB2HknPU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hylog.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hylog.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hylog.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hylog.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://hylog.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Pianotypes Devlog 2" />
<meta property="og:description" content="I&rsquo;m a bit more than late for a second devlog but I figured there&rsquo;s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I&rsquo;m hoping with this log to bring that focus back down to just that.
Since my previous post, I&rsquo;ve done a lot of fine tuning of the UI and functionality of the site." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hylog.netlify.app/posts/2023/old/dev/pianotypes-devlog-2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-21T13:18:35-04:00" />
<meta property="article:modified_time" content="2023-08-21T13:18:35-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Pianotypes Devlog 2"/>
<meta name="twitter:description" content="I&rsquo;m a bit more than late for a second devlog but I figured there&rsquo;s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I&rsquo;m hoping with this log to bring that focus back down to just that.
Since my previous post, I&rsquo;ve done a lot of fine tuning of the UI and functionality of the site."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hylog.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Pianotypes Devlog 2",
      "item": "https://hylog.netlify.app/posts/2023/old/dev/pianotypes-devlog-2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Pianotypes Devlog 2",
  "name": "Pianotypes Devlog 2",
  "description": "I\u0026rsquo;m a bit more than late for a second devlog but I figured there\u0026rsquo;s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I\u0026rsquo;m hoping with this log to bring that focus back down to just that.\nSince my previous post, I\u0026rsquo;ve done a lot of fine tuning of the UI and functionality of the site.",
  "keywords": [
    "development", "pianotypes"
  ],
  "articleBody": "I’m a bit more than late for a second devlog but I figured there’s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I’m hoping with this log to bring that focus back down to just that.\nSince my previous post, I’ve done a lot of fine tuning of the UI and functionality of the site. One I’m quite happy with was adding draggability to the inputs simialr to other software like Blender. It’s a lot more convenient than typing and allows you to set options easily using mouse only.\nFurthermore, I’ve added some toast notifications for some short logging and responsive text to user actions. I want to add some text guides to the options and while this is a step in that direction, it isn’t quite it. At least I have a way to logging errors to the user for now.\nNext, I took a look at the midi playback, particularly the scheduled playback using smplr. Because the smplr soundfont player only has a callback for the ending of notes, I don’t have a way to notify the piano when to press a key, just when to release it. My temporary solution was to just use timeouts but it had time inconsistency issues. I thought I might try making a PR on smplr to add an onstart callback but after looking at the web audio API, it turns out it’s not as easy as it might seems. The reason why smplr has an onended callback in the first place is because it use scheduled web audio nodes that come with an onended callback but not an on start.\nI did some scouring and found a hacky solution on StackOverflow to create a duplicate audio node that’s silent and play that only for the purpose of it’s callback. If I set the delay and duration of that node to be the same, it effectively makes its start and stop identical giving me an onstart callback. I replaced my timeouts with audio nodes, as well as creating a secondary audiocontext so I don’t overload my original since now I effectively have double the audio nodes in use. The result is my keyboard presses being completely in sync with the playback! AudioContexts have a much better timing system than timeouts.\nI think my next focus is finally getting those instructions dialogues in cause that’s the main feature that’s keeping from having more people try the app.\n",
  "wordCount" : "428",
  "inLanguage": "en",
  "datePublished": "2023-08-21T13:18:35-04:00",
  "dateModified": "2023-08-21T13:18:35-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hylog.netlify.app/posts/2023/old/dev/pianotypes-devlog-2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hylu Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hylog.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hylog.netlify.app/" accesskey="h" title="Hylu Blog (Alt + H)">Hylu Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hylog.netlify.app/posts/" title="Posts">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://hylog.netlify.app/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hylog.netlify.app/">Home</a>&nbsp;»&nbsp;<a href="https://hylog.netlify.app/posts/">Posts</a></div>
    <h1 class="post-title">
      Pianotypes Devlog 2
    </h1>
    <div class="post-meta"><span title='2023-08-21 13:18:35 -0400 EDT'>August 21, 2023</span>

</div>
    
    
    
    
  </header> 
<style>
    .entry-cover img {
        height: 200px !important;
        object-fit: cover !important;
    }
</style>


  <div class="post-content"><p>I&rsquo;m a bit more than late for a second devlog but I figured there&rsquo;s no better thing to call this. I originally made this blog for the purposes of short and sweet devlogs but my recent posts have been bit larger than what I originally intended. I&rsquo;m hoping with this log to bring that focus back down to just that.</p>
<p>Since my previous post, I&rsquo;ve done a lot of fine tuning of the UI and functionality of the site. One I&rsquo;m quite happy with was adding draggability to the inputs simialr to other software like Blender. It&rsquo;s a lot more convenient than typing and allows you to set options easily using mouse only.</p>
<p>Furthermore, I&rsquo;ve added some toast notifications for some short logging and responsive text to user actions. I want to add some text guides to the options and while this is a step in that direction, it isn&rsquo;t quite it. At least I have a way to logging errors to the user for now.</p>
<p>Next, I took a look at the midi playback, particularly the scheduled playback using smplr. Because the smplr soundfont player only has a callback for the ending of notes, I don&rsquo;t have a way to notify the piano when to press a key, just when to release it. My temporary solution was to just use timeouts but it had time inconsistency issues. I thought I might try making a PR on smplr to add an onstart callback but after looking at the web audio API, it turns out it&rsquo;s not as easy as it might seems. The reason why smplr has an onended callback in the first place is because it use scheduled web audio nodes that come with an onended callback but not an on start.</p>
<p>I did some scouring and found a hacky solution on StackOverflow to create a duplicate audio node that&rsquo;s silent and play that only for the purpose of it&rsquo;s callback. If I set the delay and duration of that node to be the same, it effectively makes its start and stop identical giving me an onstart callback. I replaced my timeouts with audio nodes, as well as creating a secondary audiocontext so I don&rsquo;t overload my original since now I effectively have double the audio nodes in use. The result is my keyboard presses being completely in sync with the playback! AudioContexts have a much better timing system than timeouts.</p>
<p>I think my next focus is finally getting those instructions dialogues in cause that&rsquo;s the main feature that&rsquo;s keeping from having more people try the app.</p>


    
    
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hylog.netlify.app/tags/development/">development</a></li>
      <li><a href="https://hylog.netlify.app/tags/pianotypes/">pianotypes</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hylog.netlify.app/posts/2023/old/dev/pianotypes-devlog-3/">
    <span class="title">« Prev</span>
    <br>
    <span>Pianotypes Devlog 3</span>
  </a>
  <a class="next" href="https://hylog.netlify.app/posts/2023/old/dev/revisting-pianotypes/">
    <span class="title">Next »</span>
    <br>
    <span>Revisting Pianotypes</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://hylog.netlify.app/">Hylu Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
